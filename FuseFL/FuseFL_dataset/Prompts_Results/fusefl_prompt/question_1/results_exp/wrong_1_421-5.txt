This line doesn't handle the case when seq is empty, resulting in incorrect behavior.