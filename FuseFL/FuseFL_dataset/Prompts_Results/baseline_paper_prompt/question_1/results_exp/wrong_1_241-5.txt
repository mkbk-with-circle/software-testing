The position variable is assigned inside the loop, resulting in incorrect position calculation