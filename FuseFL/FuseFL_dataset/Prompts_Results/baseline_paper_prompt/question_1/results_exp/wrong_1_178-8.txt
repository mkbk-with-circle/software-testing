The function should return the index of the current element, but it returns the index of the previous element.