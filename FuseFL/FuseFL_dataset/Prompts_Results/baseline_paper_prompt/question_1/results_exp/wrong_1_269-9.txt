Condition should be moved outside the loop