Potential bug: Modifying 'check' for every iteration without resetting it.