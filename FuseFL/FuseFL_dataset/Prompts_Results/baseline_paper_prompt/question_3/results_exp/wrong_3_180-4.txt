The loop condition is not updated after removing an element from the list