Calling max() function on every iteration is inefficient.