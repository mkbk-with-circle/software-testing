

## 🎤 第1页答辩稿：《结果分析及结论——Defects4J 数据集》（页1）

> 我们先来看 Defects4J-Lang 上七种提示顺序策略的调试成功率结果。

从图表可以看出，“最开始”和 “Test-first” 两种策略的修复成功率分别为 **41.7%** 和 **36.7%**，显著高于其余策略，说明**将关键信息放在提示的开头位置**，是对 LLM 理解 bug 问题更有利的做法。

我们进一步分析其背后原因：

* 以“最开始”策略为例，它首先呈现了有缺陷的源码（Buggy code），模型初始注意力就集中在待修复对象上；
* 接下来顺序地给出失败的测试和错误日志等症状信息，构成了一种“从代码到错误”的逻辑路径；
* 这样的组织顺序更有助于 LLM 建立因果链条，从而有效定位问题并推理出修复。

相反，最差的策略是“LLM 默认顺序”，它的修复成功率只有 **26.7%**。我们发现，尽管LLM具有一定的“首因 + 近因效应”，但是这种顺序将**测试定位信息（Test line）放在提示的末尾**，依然是很低效的，可能从侧面体现出了“首因 + 近因效应”中依然是首因占据了大头，当然这也和模型有关：

* 模型在处理长序列时，对末尾 token 的注意力常常被上下文冲淡；
* 当看到这条关键信息时，模型可能已经“精力耗尽”，导致无法正确使用这条测试失败位置；
* 因此最终无法正确推理出错误的根源，成功率明显下滑。

---

## 🎤 第2页答辩稿：《结果分析及结论——Defects4J 数据集》（页2）

我们接着来看第三个有趣的现象：

尽管“人类启发”策略试图模拟真实开发者的调试顺序，即“先看测试结果、再看错误、最后看源码”，但它的成功率只有 **33.3%**，并没有如预期那样特别突出。

这背后可能说明：**人类的直觉调试顺序，并不一定最适合 LLM**。

其原因可能有两个方面：

1. LLM 是在大规模自然语言 + 代码的语料中预训练出来的，其中可能频繁出现「先贴代码 → 再说明问题」的问答格式，比如论坛贴文或 Stack Overflow；
2. 也就是说，LLM 已经对“先代码再错误”这种叙事结构形成了**概率上的先验认知**，它更容易理解、也更擅长这类结构。

因此我们推测，**LLM 对提示的输入顺序是敏感的**，其性能不仅受语义信息的内容影响，也受到**结构与排列方式**的影响。

最终结论我们总结如下：

> **LLM 的“位置偏置 + 上下文竞争”机制决定了：关键信息越靠近开头或结尾，越容易被注意并参与推理；如果把关键的错误提示、失败测试等放在序列的中间或后部，模型可能会错过这些关键信息，从而导致修复失败。**


好的，以下是你这页“消融实验”PPT的【正式答辩讲稿】，语言简洁、有逻辑、有结论，适合在答辩中直接讲述：

---

## 🎤 答辩稿：《结果分析及结论 —— 消融实验》

为了进一步理解不同信息对 LLM 修复能力的具体贡献，我们在“最开始”策略的基础上设计了四组**消融实验**，每组去掉不同的信息组合，观察修复成功率的变化。

---

**结论一：Error Code Block 单独去除 → 成功率下降 16.7 个百分点**
说明：**出错的测试代码**对于 LLM 来说，是非常关键的定位信息。一旦缺失，模型虽然能看到完整代码和报错，但很难快速聚焦到出错位置，从而大大降低了修复准确率。

---

**结论二：Error Code Block 与 Failed Test + Test Line 的作用相似，可互补**
我们发现：

* 去掉 Error Code Block 成功率为 25.0%；
* 去掉 Failed Test + Test Line 成功率为 28.3%；
* 但如果同时缺失两者（第3行），成功率下降到 23.3%，再进一步说明它们在功能上是互为补充的；
* 换句话说：**这两类信息虽然都用于定位，但各自的信号不完全重合，有一定冗余也有互补性**。

---

**建议总结：**

1. 在设计提示时，**必须保留 error（错误信息）与至少一种定位线索（Test 或 Code Block）**；
2. 若 token 长度有限，可考虑只保留 Test Line + Failed Test 或 Error Code Block 其中之一，以在节省 token 的同时保证一定修复能力；
3. 但**绝不建议去掉 error 日志**，它对模型的语义理解影响极大。

---

> 总结来说，消融实验验证了我们之前的假设：**信息不只是“有没有”，而是“排布顺序”和“互相配合”的问题**。不同信息对修复的价值不等，提示设计时需要优先保留高价值线索，同时平衡 token 开销。

---

如你还需 30 秒速讲版、英文翻译或放大某一结论，我也可以帮你扩展。
